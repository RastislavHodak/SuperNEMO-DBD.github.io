<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Falaise: FLReconstruct Pipeline Output</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Falaise
   &#160;<span id="projectnumber">2.1.0</span>
   </div>
   <div id="projectbrief">SuperNEMO Software Toolkit</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">FLReconstruct Pipeline Output </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#flreconstructpipelineoutput_introduction">Introduction </a></li>
<li class="level1"><a href="#flreconstructpipelineoutput_thesharedhandleconcept">The shared handle concept </a></li>
<li class="level1"><a href="#flreconstructpipelineoutput_mockdigitizationandcalibration">Mock digitization and calibration </a></li>
<li class="level1"><a href="#flreconstructpipelineoutput_trackerclustering">Tracker clustering </a></li>
<li class="level1"><a href="#flreconstructpipelineoutput_trackfitting">Track fitting </a></li>
<li class="level1"><a href="#flreconstructpipelineoutput_chargedparticlemeasurements">Charged particle measurements </a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="flreconstructpipelineoutput_introduction"></a>
Introduction </h1>
<p>The current official reconstruction pipeline consists in several steps, each responsible of the elaboration of additional informations stored in dedicated banks in the event record. We saw in <a class="el" href="flsimulateoutput.html">the tutorial on FLSimulate output</a> that the Monte-Carlo program creates a new data bank in the event record (a <code>datatools::things</code> object) which is keyed <code>SD</code> (<b>S</b> imulated <b>D</b> ata).</p>
<p>Once the FLSimulate output file is generated, it can be used as the input of the FLReconstruct program. We describe here the contents of the <em>reconstruction data banks</em> added by the reconstruction pipeline.</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;   +----------------------------------+</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;   | Event record (datatools::things) |</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;   +----------------------------------+</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;         |</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;         +----------------+------+-------+-------+- - - - ?</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;         |                |      |       |       |</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;       +----+     :     +----+ +-----+ +-----+ +-----+</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;       | SD |     :     | CD | | TCD | | TTD | | PTD |</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;       +----+     :     +----+ +-----+ +-----+ +-----+</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;         /        :          \    \      /     /</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;        /         :           \    \    /     /</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;+------+------+   :         +--+----+--+-----+-+</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;| Monte-Carlo |   :         |  Reconstruction  |</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;|   output    |   :         |     outputs      |</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;+-------------+   :         +------------------+</div></div><!-- fragment --><h1><a class="anchor" id="flreconstructpipelineoutput_thesharedhandleconcept"></a>
The shared handle concept </h1>
<p>Before to describe the SuperNEMO reconstruction banks, we explain the <em>shared handle</em> concept, a special kind of reference to an arbitrary object. A <em>shared handle</em> is implemented through the <code>datatools::handle&lt;T&gt;</code> template class, where <code>T</code> is an arbitrary class. It is based on the template <code>boost::shared_ptr&lt;T&gt;</code> <em>smart pointer</em> class from the Boost library (note: this concept is also available in C++11, however we don't use this implementation in the SuperNEMO software yet).</p>
<p>The <em>shared handle</em> is a special kind of pointer which is responsible of the memory management of the object it handles. More, it is able to share the handle to this object with as many as other <em>shared handles</em> of the same type. As long as at least one <em>shared handle</em> points to the object, the object is still managed in memory and thus accessible. When, and only when, the last <em>shared handle</em> on a given object is destroyed, the object itself is finally discarded from the memory. This mechanism is implemented using some hidden reference counter.</p>
<p>Below we represent a shared handle [h] that originaly points to an object which has been dynamically allocated in memory (typically through the <code>new</code> C++ operator): </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;          +-------[1]</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;[h]------&gt;| Object |</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;          +--------+</div></div><!-- fragment --><p> As it is the only shared handle refering to this object (see the [1] counter on the top right corner of the box), when the [h] handle is destroyed (we use here the [~h] symbol), this automatically discards the object (using the ~Object to represent the deletion process): </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;          +------[1=&gt;0]</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;[~h]~ ~ ~ | ~Object |            ======&gt;   {nothing is left in memory}</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;          +---------+</div></div><!-- fragment --><p>Now suppose we have a second shared handle [h'] that now enters the game and points to the same object than [h] : </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;          +-------[2]</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;[h]------&gt;| Object |&lt;------[h&#39;]</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;          +--------+</div></div><!-- fragment --><p> If we destroy [h], the object will be not destroyed because there is still one shared handle that refers to it, namely [h'], which now becomes the responsible of the memory management of the object: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;          +-----[2=&gt;1]                     +-------[1]</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;[~h]~ ~ ~ | Object |&lt;------[h&#39;]  ======&gt;   | Object |&lt;------[h&#39;]</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;          +--------+                       +--------+</div></div><!-- fragment --><p>Many SuperNEMO data models make use of this technique to manipulate data structures of interest: hits, clusters of hits, tracks... whatever data banks refer to these objects. This enables the sharing of such objects from within various data banks. We don't have to care about who or what is responsible of the memory management.</p>
<p>The illustration below illustrates a typical case where a <code>CD</code> and a <code>TCD</code> banks refer to the same pool of Geiger hits (the [h?] represent <em>shared handle</em> objects):</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;+----------------------------------+</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;| Event record (datatools::things) |</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;+----------------------------------+</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;  |</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;  +-------------------------+</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;  |                         |</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;+----+                    +-----+</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;| CD |                    | TCD |</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;+----+                    +-----+</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;  |                         |</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;  |                         +---------------[h0]-------------[h1]</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;  |                         |                |                |</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;  |                         |                v                v</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;  |                  +-------------+   +------------+   +------------+</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;  |                  | Unclustered |   | Cluster #0 |   | Cluster #1 |</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;  |                  +-------------+   +------------+   +------------+</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;  |                         |                |                |</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;  |      +----------[2]     |                |                |</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160; [ha]---&gt;| GG Hit #0 |&lt;----[hA]              |                |</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;  |      +-----------+                       |                |</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;  |      +----------[2]                      |                |</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160; [hb]---&gt;| GG Hit #1 |&lt;---------------------[hB]              |</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;  |      +-----------+                       |                |</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;  |      +----------[2]                      |                |</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160; [hc]---&gt;| GG Hit #2 |&lt;---------------------[hC]              |</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;  |      +-----------+                       |                |</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;  |      +----------[3]                      |                |</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160; [hd]---&gt;| GG Hit #3 |&lt;---------------------[hD]    /--------[hE]</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;  |      +-----------+&lt;----------------------------/          |</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  |      +----------[2]                                       |</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160; [he]---&gt;| GG Hit #4 |&lt;--------------------------------------[hF]</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  |      +-----------+                                        |</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  |      +----------[2]                                       |</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160; [hf]---&gt;| GG Hit #5 |&lt;--------------------------------------[hG]</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;         +-----------+</div></div><!-- fragment --><p> If we destroy the <code>CD</code> bank from the event record, this will destroy the shared handles ha, hb, hc, hd, he and hf. However, as Geiger hits objects from #0 to #5 are also refered by other shared handles from the <code>TCD</code> bank, they are not deleted : </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;+----------------------------------+</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;| Event record (datatools::things) |</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;+----------------------------------+</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;                            |</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;                          +-----+</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;                          | TCD |</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;                          +-----+</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;                            |</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;                            +---------------[h0]-------------[h1]</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;                            |                |                |</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;                            |                v                v</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;                     +-------------+   +------------+   +------------+</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;                     | Unclustered |   | Cluster #0 |   | Cluster #1 |</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;                     +-------------+   +------------+   +------------+</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;                            |                |                |</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;         +----------[1]     |                |                |</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;         | GG Hit #0 |&lt;----[hA]              |                |</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;         +-----------+                       |                |</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;         +----------[1]                      |                |</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;         | GG Hit #1 |&lt;---------------------[hB]              |</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;         +-----------+                       |                |</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;         +----------[1]                      |                |</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;         | GG Hit #2 |&lt;---------------------[hC]              |</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;         +-----------+                       |                |</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;         +----------[2]                      |                |</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;         | GG Hit #3 |&lt;---------------------[hD]    /--------[hE]</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;         +-----------+&lt;----------------------------/          |</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;         +----------[1]                                       |</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;         | GG Hit #4 |&lt;--------------------------------------[hF]</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;         +-----------+                                        |</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;         +----------[1]                                       |</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;         | GG Hit #5 |&lt;--------------------------------------[hG]</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;         +-----------+</div></div><!-- fragment --><p> If we now remove the cluster #0 from the <code>TCD</code> bank, the Geiger hits #1 and #2 are destroyed but the other ones are preserved, protected by their shared handles: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;+----------------------------------+</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;| Event record (datatools::things) |</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;+----------------------------------+</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;                            |</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;                          +-----+</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;                          | TCD |</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;                          +-----+</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;                            |</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;                            +---------------[h1]</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;                            |                |</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;                            |                v</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;                     +-------------+   +------------+</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;                     | Unclustered |   | Cluster #1 |</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;                     +-------------+   +------------+</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;                            |                |</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;         +----------[1]     |                |</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;         | GG Hit #0 |&lt;----[hA]              |</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;         +-----------+                       |</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;         +----------[1]                      |</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;         | GG Hit #3 |&lt;---------------------[hE]</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;         +-----------+                       |</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;         +----------[1]                      |</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;         | GG Hit #4 |&lt;---------------------[hF]</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;         +-----------+                       |</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;         +----------[1]                      |</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;         | GG Hit #5 |&lt;---------------------[hG]</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;         +-----------+</div></div><!-- fragment --><p>That means that even if we completely remove some banks from the event record, as long as some shared handles will point to a given object from other data banks, the object will be preserved from deletion and will remain usable at any processing stage of the pipeline. This technique is non only safe with respect to memory management, it is also fully supported by the Boost/Serialization library which is the base of the Falaise I/O system.</p>
<h1><a class="anchor" id="flreconstructpipelineoutput_mockdigitizationandcalibration"></a>
Mock digitization and calibration </h1>
<p>Both mock digitization and calibration modules <code><a class="el" href="classsnemo_1_1processing_1_1mock__tracker__s2c__module.html" title="Simple modelling of the time and space measurement with the SuperNEMO drift cells in Geiger mode...">snemo::processing::mock_tracker_s2c_module</a></code> and <code><a class="el" href="classsnemo_1_1processing_1_1mock__calorimeter__s2c__module.html" title="A mock calibration for SuperNEMO calorimeter hits. ">snemo::processing::mock_calorimeter_s2c_module</a></code> create and fill the <code>CD</code> bank (<b>C</b> alibrated <b>D</b> ata). The <code>CD</code> bank contains a <code><a class="el" href="classsnemo_1_1datamodel_1_1calibrated__data.html" title="The data structure that hosts information about calibrated hits. ">snemo::datamodel::calibrated_data</a></code> object.</p>
<p>Each <code><a class="el" href="classsnemo_1_1datamodel_1_1calibrated__data.html" title="The data structure that hosts information about calibrated hits. ">snemo::datamodel::calibrated_data</a></code> object contains:</p><ul>
<li>a collection of <em>shared handles</em> on calibrated calorimeter hits, each of them representing a hit in scintillator blocks (main walls, X-walls and gamma veto). A calibrated calorimeter hit is implemented as a <code><a class="el" href="classsnemo_1_1datamodel_1_1calibrated__calorimeter__hit.html" title="Model of a calibrated calorimeter hit. ">snemo::datamodel::calibrated_calorimeter_hit</a></code> object which contains:<ul>
<li>the unique identifier of the hit (an integer, inherited from the <code>geomtools::base_hit</code> mother class)</li>
<li>the geometry identifier (GID) of the hit scintillator block (a <code>geomtools::geom_id</code> instance, inherited from the <code>geomtools::base_hit</code> mother class)</li>
<li>a collection of auxiliary properties (a <code>datatools::properties</code> instance, inherited from the <code>geomtools::base_hit</code> mother class)</li>
<li>the energy deposited in the calorimeter block (a real positive value in unit of energy)</li>
<li>the error on the energy deposited in the calorimeter block (a real positive value in unit of energy)</li>
<li>the time of the hit in the calorimeter block (a real value in unit of time)</li>
<li>the error on the time of the hit in the calorimeter block (a real positive value in unit of time)</li>
</ul>
</li>
<li>a collection of shared handles on calibrated tracker hits (Geiger), each of them representing a hit in Geiger drift cells. A calibrated tracker hit is implemented as a <code><a class="el" href="classsnemo_1_1datamodel_1_1calibrated__tracker__hit.html" title="Model of a calibrated tracker hit (Geiger regime) ">snemo::datamodel::calibrated_tracker_hit</a></code> object which contains:<ul>
<li>the unique identifier of the hit (an integer, inherited from the <code>geomtools::base_hit</code> mother class)</li>
<li>the geometry identifier (GID) of the hit drift cell (a <code>geomtools::geom_id</code> instance, inherited from the <code>geomtools::base_hit</code> mother class)</li>
<li>a collection of auxiliary properties (a <code>datatools::properties</code> instance, inherited from the <code>geomtools::base_hit</code> mother class)</li>
<li>the transverse drift distance within the cell coordinates system (a real positive value in unit of length)</li>
<li>the error on the transverse drift distance within the cell coordinates system (a real positive value in unit of length)</li>
<li>the longitudinal position within the cell coordinates system (a real value in unit of length)</li>
<li>the error on the longitudinal position within the cell coordinates system (a real positive value in unit of length)</li>
<li>the (X, Y) position of the anode wire within the SuperNEMO module coordinates system (two real values in unit of length)</li>
<li>the delayed time of the hit (a real value in unit of time)</li>
<li>the error on the delayed time of the hit (a real positive value in unit of time)</li>
</ul>
</li>
<li>a collection of auxiliary properties (a <code>datatools::properties</code> instance).</li>
</ul>
<h1><a class="anchor" id="flreconstructpipelineoutput_trackerclustering"></a>
Tracker clustering </h1>
<p>Whatever tracker clustering module is used (<code>snemo::reconstruction::mock_tracker_clustering_module</code>, <code>snemo::reconstruction::cat_tracker_clustering_module</code> or <code>snemo::reconstruction::sultan_tracker_clustering_module</code>), it create and fill the <code>TCD</code> bank (<b>T</b> racker <b>C</b> lustering <b>D</b> ata). The <code>TCD</code> bank contains a <code><a class="el" href="classsnemo_1_1datamodel_1_1tracker__clustering__data.html" title="SuperNEMO tracker clustering data model. ">snemo::datamodel::tracker_clustering_data</a></code> object.</p>
<p>Each <code><a class="el" href="classsnemo_1_1datamodel_1_1tracker__clustering__data.html" title="SuperNEMO tracker clustering data model. ">snemo::datamodel::tracker_clustering_data</a></code> object contains:</p><ul>
<li>a collection of shared handles on <code><a class="el" href="classsnemo_1_1datamodel_1_1tracker__clustering__solution.html" title="A collection of tracker clusters. ">snemo::datamodel::tracker_clustering_solution</a></code> objects</li>
<li>a shared handle on the default <code><a class="el" href="classsnemo_1_1datamodel_1_1tracker__clustering__solution.html" title="A collection of tracker clusters. ">snemo::datamodel::tracker_clustering_solution</a></code> object (ideally the best solution among the former collection, using some arbitrary criterion: P-value, chi2... depending on the way the clustering module ranks different possible solutions).</li>
<li>a collection of auxiliary properties (a <code>datatools::properties</code> instance). It is expected that in the case of several clustering solutions are computed by the clustering algorithm, we are able to determine which one should be used as the best one. For the current release, only one clustering solution is computed so it is automatically selected as the default one.</li>
</ul>
<p>Each <code><a class="el" href="classsnemo_1_1datamodel_1_1tracker__clustering__solution.html" title="A collection of tracker clusters. ">snemo::datamodel::tracker_clustering_solution</a></code> object contains:</p><ul>
<li>the unique identifier of the solution (an integer)</li>
<li>a collection of shared handles on <code><a class="el" href="classsnemo_1_1datamodel_1_1tracker__cluster.html" title="A cluster of Geiger calibrated hits referenced by handles. ">snemo::datamodel::tracker_cluster</a></code> objects</li>
<li>a collection of shared handles on unclustered hits (referencing the calibrated tracker hits in the <code>CD</code> bank that are not associated to any cluster for whatever reason: isolated hits, not in time...)</li>
<li>a collection of auxiliary properties (<code>datatools::properties</code>).</li>
</ul>
<p>Each <code><a class="el" href="classsnemo_1_1datamodel_1_1tracker__cluster.html" title="A cluster of Geiger calibrated hits referenced by handles. ">snemo::datamodel::tracker_cluster</a></code> object contains:</p><ul>
<li>the unique identifier of the hit (an integer, inherited from the <code>geomtools::base_hit</code> mother class)</li>
<li>the geometry identifier (GID) of the tracker submodule where the cluster lies (a <code>geomtools::geom_id</code> instance, inherited from the <code>geomtools::base_hit</code> mother class)</li>
<li>a collection of auxiliary properties (a <code>datatools::properties</code> instance, inherited from the <code>geomtools::base_hit</code> mother class)</li>
<li>a collection of shared handles on <code><a class="el" href="classsnemo_1_1datamodel_1_1calibrated__tracker__hit.html" title="Model of a calibrated tracker hit (Geiger regime) ">snemo::datamodel::calibrated_tracker_hit</a></code> objects (referencing the calibrated tracker hits in the <code>CD</code> bank)</li>
</ul>
<h1><a class="anchor" id="flreconstructpipelineoutput_trackfitting"></a>
Track fitting </h1>
<p>A track fitting algorithm tries to fit a line or an helix to a given cluster provided from the <code>TCD</code> bank. It creates and fills the <code>TTD</code> bank (<b>T</b> racker <b>T</b> rajectory <b>D</b> ata). The <code>TTD</code> bank contains a <code><a class="el" href="classsnemo_1_1datamodel_1_1tracker__trajectory__data.html" title="SuperNEMO Tracker trajectory data model. ">snemo::datamodel::tracker_trajectory_data</a></code> object.</p>
<p>Each <code><a class="el" href="classsnemo_1_1datamodel_1_1tracker__trajectory__data.html" title="SuperNEMO Tracker trajectory data model. ">snemo::datamodel::tracker_trajectory_data</a></code> object contains:</p><ul>
<li>a collection of shared handles on <code><a class="el" href="classsnemo_1_1datamodel_1_1tracker__trajectory__solution.html" title="A collection of tracker clusters , solution of a trajectory algorithm. ">snemo::datamodel::tracker_trajectory_solution</a></code> objects</li>
<li>a shared handle on the default <code><a class="el" href="classsnemo_1_1datamodel_1_1tracker__trajectory__solution.html" title="A collection of tracker clusters , solution of a trajectory algorithm. ">snemo::datamodel::tracker_trajectory_solution</a></code> object (ideally the best solution among the former collection, using some arbitrary criterion depending on the way the fitting module ranks different possible solutions)</li>
<li>a collection of auxiliary properties (a <code>datatools::properties</code> instance).</li>
</ul>
<p>Each <code><a class="el" href="classsnemo_1_1datamodel_1_1tracker__trajectory__solution.html" title="A collection of tracker clusters , solution of a trajectory algorithm. ">snemo::datamodel::tracker_trajectory_solution</a></code> object contains:</p><ul>
<li>the unique identifier of the solution (an integer)</li>
<li>the shared handle to the clustering solution of which the clusters of hits have been fitted</li>
<li>a collection of shared handles on <code><a class="el" href="classsnemo_1_1datamodel_1_1tracker__trajectory.html" title="A trajectory of Geiger calibrated hits referenced by handles. ">snemo::datamodel::tracker_trajectory</a></code> objects associated to fitted clusters</li>
<li>a collection of shared handles on unfitted clusters</li>
<li>a collection of auxiliary properties (a <code>datatools::properties</code> instance).</li>
</ul>
<p>Each <code><a class="el" href="classsnemo_1_1datamodel_1_1tracker__trajectory.html" title="A trajectory of Geiger calibrated hits referenced by handles. ">snemo::datamodel::tracker_trajectory</a></code> object contains:</p><ul>
<li>the unique identifier of the trajectory (an integer, inherited from the <code>geomtools::base_hit</code> mother class)</li>
<li>the geometry identifier (GID) of the tracker submodule where the trajectory lies (a <code>geomtools::geom_id</code> instance, inherited from the <code>geomtools::base_hit</code> mother class)</li>
<li>a collection of auxiliary properties (a <code>datatools::properties</code> instance, inherited from the <code>geomtools::base_hit</code> mother class)</li>
<li>the shared handle to the cluster associated to the fitted trajectory</li>
<li>a collection of shared handles to orphan Geiger hits in the cluster that were not taken into account by the fit</li>
<li>a shared handle to the trajectory pattern (line or helix)</li>
</ul>
<p>Two types of trajectory patterns are supported:</p><ul>
<li>the <code><a class="el" href="classsnemo_1_1datamodel_1_1line__trajectory__pattern.html" title="The fitted line trajectory pattern. ">snemo::datamodel::line_trajectory_pattern</a></code> class for linear fitting,</li>
<li>the <code><a class="el" href="classsnemo_1_1datamodel_1_1helix__trajectory__pattern.html" title="The fitted helix trajectory pattern. ">snemo::datamodel::helix_trajectory_pattern</a></code> class for helical fitting.</li>
</ul>
<p>Both classes inherit the <code><a class="el" href="classsnemo_1_1datamodel_1_1base__trajectory__pattern.html" title="The base class of fitted trajectory pattern. ">snemo::datamodel::base_trajectory_pattern</a></code> classes.</p>
<p>A <code><a class="el" href="classsnemo_1_1datamodel_1_1line__trajectory__pattern.html" title="The fitted line trajectory pattern. ">snemo::datamodel::line_trajectory_pattern</a></code> contains:</p><ul>
<li>the pattern identifier, a label that identifies the type of trajectory pattern (value is <code>"line"</code>)</li>
<li>a <code>geomtools::line_3d</code> object representing the fitted linear trajectory in the reference frame of the tracking chamber. It contains:<ul>
<li>the first and last points defining a linear segment.</li>
</ul>
</li>
</ul>
<p>A <code><a class="el" href="classsnemo_1_1datamodel_1_1helix__trajectory__pattern.html" title="The fitted helix trajectory pattern. ">snemo::datamodel::helix_trajectory_pattern</a></code> contains:</p><ul>
<li>the pattern identifier, a label that identifies the type of trajectory pattern (value is <code>"helix"</code>)</li>
<li>a <code>geomtools::helix_3d</code> object representing the fitted helical trajectory in the reference frame of the tracking chamber. It contains:<ul>
<li>the center of the helix,</li>
<li>the radius of the helix,</li>
<li>the pitch of the helix,</li>
<li>the first and last reduced angles of the helical segment.</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="flreconstructpipelineoutput_chargedparticlemeasurements"></a>
Charged particle measurements </h1>
<p>A module dedicated to measurements of charged particles tries to compute some useful informations associated to a given trajectory. The <code>ChargedParticleTracking</code> plugin provides such a module: <code>snemo::reconstruction::charged_particle_tracking_module</code>. This module is able to perform several measurements of interest on the trajectories that have been fitted during the previous track fitting process:</p><ul>
<li>determine the charge associated to a trajectory (exploiting the possible curvature of the track)</li>
<li>compute various vertexes of interest associated to the trajectory:<ul>
<li>impact(s) on the source foil</li>
<li>impact(s) on the entrance surface of scintillator blocks in the main calorimeter walls, the X-calo or the gamma veto</li>
</ul>
</li>
</ul>
<p>It used the <code>CD</code> and <code>TTD</code> banks as its input and creates and fills the <code>PTD</code> bank (<b>P</b> article <b>T</b> rack <b>D</b> ata). The <code>PTD</code> bank contains a <code><a class="el" href="classsnemo_1_1datamodel_1_1particle__track__data.html" title="SuperNEMO particle track model. ">snemo::datamodel::particle_track_data</a></code> object.</p>
<p>TODO:</p><ul>
<li>Describe the <code><a class="el" href="classsnemo_1_1datamodel_1_1particle__track__data.html" title="SuperNEMO particle track model. ">snemo::datamodel::particle_track_data</a></code> object.</li>
<li>Describe the <code>snemo::datamodel::particle_track_solution</code> object.</li>
<li>Describe the <code><a class="el" href="classsnemo_1_1datamodel_1_1particle__track.html" title="SuperNEMO particle track. ">snemo::datamodel::particle_track</a></code> object.</li>
<li>Describe the <code>geomtools::blur_spot</code> object. </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
